<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>i dont understand this</title>
  <style>
    :root{--cell:30px}
    *{box-sizing:border-box;font-family:Inter, system-ui, sans-serif}
    body{margin:0;display:flex;align-items:center;justify-content:center;min-height:100vh;background:#0b1220;color:#e6eef8}
    .wrap{display:grid;grid-template-columns:auto 200px;gap:20px;align-items:start}
    .panel{background:linear-gradient(180deg,#071026 0%, #0d1a2b 100%);padding:16px;border-radius:12px;box-shadow:0 6px 30px rgba(2,6,23,.6)}
    canvas{display:block;background:#071021;border-radius:6px;box-shadow:inset 0 0 0 4px rgba(255,255,255,0.02)}
    .hud{display:flex;flex-direction:column;gap:12px}
    .stat{background:rgba(255,255,255,0.02);padding:10px;border-radius:8px;text-align:center}
    h1{margin:0 0 8px 0;font-size:18px}
    .controls{font-size:13px;color:#9fb0d2}
    button{cursor:pointer;padding:8px 10px;border-radius:8px;border:0;background:#1b3652;color:#e8f3ff}
    footer{margin-top:10px;font-size:12px;color:#84a0c6}
    @media (max-width:720px){.wrap{grid-template-columns:1fr;align-items:center}}
  </style>
</head>
<body>
  <div class="wrap">
    <div class="panel">
      <h1>da fuq</h1>
      <div style="display:flex;gap:12px;align-items:center">
        <canvas id="game"></canvas>
        <div style="display:flex;flex-direction:column;gap:12px">
          <canvas id="next"></canvas>
          <div class="controls">
            <div>controls:</div>
            <div>← → : move</div>
            <div>↓ : soft drop</div>
            <div>space : hard drop</div>
            <div>up / x : rotate</div>
            <div>p : pause</div>
          </div>
        </div>
      </div>
    </div>

    <div class="panel hud">
      <div class="stat"><strong>score</strong><div id="score">0</div></div>
      <div class="stat"><strong>levle</strong><div id="level">1</div></div>
      <div class="stat"><strong>lins</strong><div id="lines">0</div></div>
      <div style="display:flex;gap:8px;"><button id="startBtn">start/restart</button><button id="pauseBtn">pause</button></div>
      <footer>umm umm i didnt know this worked</footer>
    </div>
  </div>

<script>
(function(){
  const COLS=10, ROWS=20, SCALE=30;
  const canvas=document.getElementById('game'); const ctx=canvas.getContext('2d'); canvas.width=COLS*SCALE; canvas.height=ROWS*SCALE;
  const ncanvas=document.getElementById('next'); const nctx=ncanvas.getContext('2d'); ncanvas.width=4*SCALE; ncanvas.height=4*SCALE;

  const PIECES={
    I:[[0,0,0,0],[1,1,1,1],[0,0,0,0],[0,0,0,0]],
    J:[[2,0,0],[2,2,2],[0,0,0]],
    L:[[0,0,3],[3,3,3],[0,0,0]],
    O:[[4,4],[4,4]],
    S:[[0,5,5],[5,5,0],[0,0,0]],
    T:[[0,6,0],[6,6,6],[0,0,0]],
    Z:[[7,7,0],[0,7,7],[0,0,0]]
  };
  const COLORS=[null,'#00f0f0','#0000f0','#f0a000','#f0f000','#00f000','#a000f0','#f00000'];

  function createMatrix(w,h){const m=[];while(h--)m.push(new Array(w).fill(0));return m;}
  let arena=createMatrix(COLS,ROWS);

  function drawMatrix(matrix,offset,context,cell){
    for(let y=0;y<matrix.length;y++)for(let x=0;x<matrix[y].length;x++){const v=matrix[y][x];if(v){context.fillStyle=COLORS[v];context.fillRect((x+offset.x)*cell,(y+offset.y)*cell,cell-1,cell-1);}}
  }
  function draw(){ctx.fillStyle='#071021';ctx.fillRect(0,0,canvas.width,canvas.height);drawMatrix(arena,{x:0,y:0},ctx,SCALE);drawMatrix(player.matrix,player.pos,ctx,SCALE);}

  function collide(arena,p){const m=p.matrix,o=p.pos;for(let y=0;y<m.length;y++)for(let x=0;x<m[y].length;x++){if(m[y][x]&&(arena[y+o.y]&&arena[y+o.y][x+o.x])!==0)return true;}return false;}
  function merge(arena,p){p.matrix.forEach((row,y)=>row.forEach((v,x)=>{if(v)arena[y+p.pos.y][x+p.pos.x]=v;}));}

  function rotate(matrix,dir){for(let y=0;y<matrix.length;y++)for(let x=0;x<y;x++) [matrix[x][y],matrix[y][x]]=[matrix[y][x],matrix[x][y]]; if(dir>0)matrix.forEach(r=>r.reverse()); else matrix.reverse();}
  function playerRotate(dir){const pos=player.pos.x;rotate(player.matrix,dir);let off=1;while(collide(arena,player)){player.pos.x+=off;off=-(off+(off>0?1:-1));if(Math.abs(off)>player.matrix[0].length){rotate(player.matrix,-dir);player.pos.x=pos;return;}}}

  function sweep(){let rowCount=0;outer:for(let y=arena.length-1;y>=0;--y){for(let x=0;x<arena[y].length;x++){if(arena[y][x]===0)continue outer;}const row=arena.splice(y,1)[0].fill(0);arena.unshift(row);++y;rowCount++;}if(rowCount){const pts=[0,40,100,300,1200];player.score+=pts[rowCount]*player.level;player.lines+=rowCount;player.level=Math.floor(player.lines/10)+1;updateHUD();dropInterval=Math.max(100,1000-(player.level-1)*75);}}

  function updateHUD(){document.getElementById('score').textContent=player.score;document.getElementById('level').textContent=player.level;document.getElementById('lines').textContent=player.lines;}
  function randomPiece(){const keys=Object.keys(PIECES);const k=keys[Math.floor(Math.random()*keys.length)];return PIECES[k].map(r=>r.slice());}

  const player={pos:{x:0,y:0},matrix:null,next:null,score:0,level:1,lines:0};
  function reset(){player.matrix=player.next||randomPiece();player.next=randomPiece();player.pos.y=0;player.pos.x=Math.floor((COLS-player.matrix[0].length)/2);if(collide(arena,player)){arena=createMatrix(COLS,ROWS);player.score=0;player.level=1;player.lines=0;dropInterval=1000;updateHUD();}drawNext();}
  function drawNext(){nctx.fillStyle='#071021';nctx.fillRect(0,0,ncanvas.width,ncanvas.height);const m=player.next;const padX=Math.floor((4-m[0].length)/2);const padY=Math.floor((4-m.length)/2);drawMatrix(m,{x:padX,y:padY},nctx,SCALE);}

  function playerDrop(){player.pos.y++;if(collide(arena,player)){player.pos.y--;merge(arena,player);sweep();reset();}dropCounter=0;}
  function hardDrop(){while(!collide(arena,player))player.pos.y++;player.pos.y--;merge(arena,player);sweep();reset();dropCounter=0;}
  function playerMove(dir){player.pos.x+=dir;if(collide(arena,player))player.pos.x-=dir;}

  let dropCounter=0,dropInterval=1000,lastTime=0,paused=false;
  function update(time=0){if(paused){lastTime=time;requestAnimationFrame(update);return;}const delta=time-lastTime;lastTime=time;dropCounter+=delta;if(dropCounter>dropInterval)playerDrop();draw();requestAnimationFrame(update);}

  document.addEventListener('keydown',e=>{if(e.key==='ArrowLeft')playerMove(-1);else if(e.key==='ArrowRight')playerMove(1);else if(e.key==='ArrowDown')playerDrop();else if(e.key===' '){e.preventDefault();hardDrop();}else if(e.key==='ArrowUp'||e.key.toLowerCase()==='x')playerRotate(1);else if(e.key.toLowerCase()==='z')playerRotate(-1);else if(e.key.toLowerCase()==='p')togglePause();draw();});
  function togglePause(){paused=!paused;document.getElementById('pauseBtn').textContent=paused?'Resume':'Pause';}

  document.getElementById('startBtn').addEventListener('click',()=>{arena=createMatrix(COLS,ROWS);player.score=0;player.level=1;player.lines=0;dropInterval=1000;updateHUD();player.next=randomPiece();reset();paused=false;lastTime=performance.now();requestAnimationFrame(update);});
  document.getElementById('pauseBtn').addEventListener('click',togglePause);

  player.next=randomPiece();reset();updateHUD();requestAnimationFrame(update);
})();
</script>
</body>
</html>
